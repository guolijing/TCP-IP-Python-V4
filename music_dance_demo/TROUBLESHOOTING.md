# 故障排除指南

## 常见问题

### 1. ErrorId is -7 错误信息

**症状**：
运行程序时控制台显示多个 "ErrorId is -7" 的消息。

**原因**：
这些消息来自 dobot_api.py 的内部调试输出。错误代码 -7 通常表示某些 API 调用返回了非标准状态码，但不影响程序正常运行。

**解决方案**：
1. 这些消息可以安全忽略，不影响机器人的正常操作
2. 如果想要抑制这些输出，可以：
   - 在运行程序时重定向标准输出：`python main.py --ip 192.168.1.198 2>/dev/null`
   - 或者修改 dobot_api.py 文件，注释掉第 2749 行的 `print("ErrorId is ", recvData[0])`

### 2. 机器人进入错误状态

**症状**：
执行某些动作（如挥手）后，机器人进入错误状态。

**原因**：
1. 动作参数超出机器人的运动范围
2. 运动速度过快导致超限
3. 机械臂碰撞或接近奇异点

**解决方案**：
1. 点击界面上的"清除报警"按钮
2. 如果清除失败，可能需要：
   - 检查动作参数是否在合理范围内
   - 降低运动速度（建议30-50%）
   - 手动将机器人移动到安全位置后再清除报警
   - 重启控制柜

### 5. 奇异点相关问题

**Nova 2 机械臂的三种奇异点**：

1. **肩奇异点**：
   - 发生条件：手腕中心接近基座轴线（X=0, Y=0）
   - 避免方法：保持距离基座轴线至少100mm

2. **腕奇异点**：
   - 发生条件：RY角度接近±90度
   - 避免方法：限制RY在±85度范围内

3. **肘奇异点**：
   - 发生条件：机械臂完全伸直或过度折叠
   - 避免方法：保持在工作空间的中间区域

**预防措施**：
- 所有动作已经过安全验证
- 执行前会自动检查目标位置
- 建议降低速度以减少惯性影响

### 3. 连接失败

**症状**：
无法连接到机器人。

**原因**：
1. IP地址错误
2. 网络连接问题
3. 机器人未开启TCP/IP模式
4. 端口被占用

**解决方案**：
1. 确认机器人IP地址正确（默认：192.168.1.198）
2. 检查网络连接，确保能ping通机器人
3. 在机器人控制软件中开启TCP/IP模式
4. 检查端口 29999 和 30004 是否被其他程序占用

### 4. 初始位置设置

**配置方法**：
在 `dance_config.json` 中修改 `home_position` 的 `joints` 数组：
```json
"home_position": {
    "joints": [0, 45, 45, 0, 90, 0],  // J1-J6的角度值
    "description": "机器人初始位置（关节角度）"
}
```

**注意事项**：
- 确保设置的角度在机器人的运动范围内
- 初始位置应该是一个安全、稳定的姿态
- 修改后重启程序生效

## 日志文件

程序运行时会在 `logs/` 目录下生成日志文件，包含详细的调试信息。查看日志文件可以帮助定位问题：

```bash
tail -f logs/robot_controller_*.log
```

## 联系支持

如果问题持续存在，请：
1. 收集日志文件
2. 记录错误发生的具体操作步骤
3. 联系技术支持